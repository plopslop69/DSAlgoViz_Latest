<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DSAlgoViz - Dashboard </title>
  <%- include("./partials/csslibs.ejs") %>
  <link rel="stylesheet" href="/css/navbar.css" />
  <link rel="stylesheet" href="/css/profile.css" />

  <link rel="icon" href="/images/title_logo.png" type="image/icon type" />
 <style>
  .btn2 {
  border: 2px solid #4b50b9;
  padding: 15px 30px 15px 30px;
  width: 100%;
  border-radius: 10px;
  color: #4b50b9;
  background-color: white;
  width: max-content;
  transition: all 0.2s ease-in-out;
}

.btn2:hover {
  color: white;
  background-color: #4b50b9;
}
 </style>
</head>

<body>
 <%- include("./partials/navbar.ejs", {page: "profile"}) %>
 
<main>

  <div class="body1" style="display: flex; margin: 0px; height: fit-content; min-height: calc(100vh - 69px);">

    <div class="col-6" style="background-color: #E2E7FE; padding-left: 150px; padding-top: 8px;">

      <div class="card mb-3"
        style="max-width: 650px; background-color: #4b50b954; padding-left: 40px; margin-top: 55px;box-shadow: 0px 0px 7px #4B50B9A0;">
        <div class="row g-0">
          <div class="col-md-8">
            <div class="card-body">
              <h1 class="card-title" style="color: #4B50B9; padding: 40px; padding-bottom: 5px;">Hi <%= user.name %>!</h1>
              <p class="card-text"><small class="text-muted" style="padding-left: 40px;">It's good to see you
                  again.</small></p>
            </div>
          </div>
          <div class="col-md-4">
            <img src="/images/hi.png" class="img-fluid rounded-start" alt="hi">
          </div>
        </div>
      </div>


      <div class="col2">
  

        <form style="display: flex;" action="/fileupload" enctype="multipart/form-data" method="POST">
         <div>
          <label for="file">Select Resource</label>
          <input style="margin-bottom: 10px; display: block;" type="file" name="file" id="file"> 
         </div>
          <button style="padding: 5px; height: 50px; width: 150px;" class="btn2" type="submit">Upload Resource</button>
        </form>

        <br />

        <form action="/logout" method="POST">
          <button style="padding: 5px; height: 50px; width: 120px;" class="btn2" type="submit">Logout</button>
        </form>


        <!-- <h1 style="color:#4B50B9;padding: 25px;">Algorithms</h1>
        <div class="row" style="padding-left: 10px; align-items: flex-start; padding-bottom: 10px;">
          <div class="col-md-auto">
            <a class="nav-link" href="#">All Algorithms</a>
          </div>
          <div class="col-md-auto">
            <a class="nav-link" href="#">Recently Viewed</a>
          </div>
          <div class="col-md-auto">
            <a class="nav-link" href="#">Favourite</a>
          </div>
        </div> -->
      </div>


      <!-- <div class="card mb-3" style="max-width: 650px; background-color: #4b50b954; border-radius: 10px; padding: 10px;box-shadow: 0px 0px 7px #4B50B9A0;">
        <div class="row g-0" style="display:flex; align-items: center;">
          <div class="col-md-3">
            <img style="border-radius: 10px;" src="../assets/ChooseAlgo/stack/img2.png" class="img-fluid" alt="stack">
          </div>
          <div class="col-md-3">
            <div class="card-body">
              <h4 style="margin-left: 50px" class="card-title">Stack</h4>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card-body" style="margin-left:50px;">
              <form action="/resourcesformat/stackres.html">
              <button class="btn1" type="submit">View Resources</button></form>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-3"
        style="max-width: 650px; background-color: #4b50b954; border-radius: 10px; padding: 10px;box-shadow: 0px 0px 7px #4B50B9A0;"">
        <div class="row g-0" style="display:flex; align-items: center;">
          <div class="col-md-3">
            <img style="border-radius: 10px;" src="/images/ll.png" class="img-fluid" alt="Linked list">
          </div>
          <div class="col-md-3">
            <div class="card-body">
              <h4 style="margin-left: 50px; width: 120px;" class="card-title">Linked List</h4>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card-body" style="margin-left:50px;">
              <form action="/resourcesformat/llres.html">
              <button class="btn1" type="submit">View Resources</button></form>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-3"
        style="max-width: 650px; background-color: #4b50b954; border-radius: 10px; padding: 10px;box-shadow: 0px 0px 7px #4B50B9A0;">
        <div class="row g-0" style="display:flex; align-items: center;">
          <div class="col-md-3">
            <img style="border-radius: 10px;" src="/images/sort.png" class="img-fluid" alt="Sorting">
          </div>
          <div class="col-md-3">
            <div class="card-body">
              <h4 style="margin-left: 50px" class="card-title">Sorting</h4>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card-body"style="margin-left:50px;">
              <form action="/resourcesformat/sortres.html">
              <button class="btn1" type="submit">View Resources</button></form>
            </div>
          </div>
        </div>
      </div>

      <div class="card mb-3"
        style="max-width: 650px; background-color: #4b50b954; border-radius: 10px; padding: 10px; box-shadow: 0px 0px 7px #4B50B9A0;">
        <div class="row g-0" style="display:flex; align-items: center;">
          <div class="col-md-3">
            <img style="border-radius: 10px;" src="/images/sr.png" class="img-fluid" alt="searching">
          </div>
          <div class="col-md-3">
            <div class="card-body">
              <h4 style="margin-left: 50px; width: 120px;" class="card-title">Searching</h4>
            </div>
          </div>
          <div class="col-md-3"style="margin-left:50px;">
            <div class="card-body">
              <form action="/resourcesformat/srchres.html">
              <button class="btn1" type="submit">View Resources</button></form>
            </div>
          </div>
        </div>
      </div> -->
    </div>


    <div class="col-6" style="background-color:#E2E7FE; padding-right: 150px;">

      <div class="card mb-3"
        style="max-width: 650px; background-color: #4b50b954; border-radius: 10px; margin-top: 55px; box-shadow: 0px 0px 7px #4B50B9A0;">
        <div class="row g-0">
          <div class="col-md-4" style="overflow: hidden; padding: 10px; display: flex; justify-content: center; align-items: center;">
            <img style="border-radius: 10px;" src="/images/default-profile.jpg" class="img-fluid" alt="profile">
          </div>
          <div class="col-md-8">
            <div class="card-body" style="text-align: left;">
              <h2 class="card-title" style="color: #4B50B9; padding: 30px; padding-bottom: 5px; padding-left: 10px;"><%= user.name %></h2>
              <h5 class="card-title" style="padding: 10px; padding-bottom: 5px; padding-top: 0px;">Sagarmatha
                Engineering College</h5>
              <!-- <h5 class="card-title" style="padding: 10px;padding-bottom: 5px; padding-top: 0px;">Roll No:
                SEC076BCT019</h5> -->
              <!-- <h5 class="card-title" style="padding: 10px;padding-bottom: 5px; padding-top: 0px;">Phone: 98xxxxxxxx
              </h5> -->
              <h5 class="card-title" style="padding: 10px; padding-top: 0px;">Email: <%= user.email %></h5>
            </div>
          </div>
        </div>
      </div>


      <h3 style="color: #4B50B9; padding-top: 25px; padding-bottom: 25px;">Your Statistics</h3>


      <div class="col2" style="max-width: 650px;">
          <div class="row" style="padding-left: 0px;">
            <div class="col-md-auto">
              <div class="card mb-4" style="max-width: 650px; background-color: #4b50b954; border-radius: 10px; box-shadow: 0px 0px 7px #4B50B9A0;">
                <div class="row g-0">
                  <div class="col-md-auto">
                    <h1 class="card-title" style="padding: 22px; padding-bottom: 3px; font-size: 50px;text-align: center;"><%= (user.algoViewed || []).length %></h1>
                  </div>
                  <div class="col-md-auto">
                    <div class="card-body">
                      <h4 class="card-title" style="padding: 10px; padding-bottom: 3px; text-align: center;">Algorithms Viewed</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-auto">
              <div class="card mb-4" style="max-width: 650px; background-color: #4b50b954; border-radius: 10px;box-shadow: 0px 0px 7px #4B50B9A0;">
                <div class="row g-0">
                  <div class="col-md-auto">
                    <h1 class="card-title" style="padding: 22px; padding-bottom: 3px;font-size: 50px;text-align: center;"><%= 8 - (user.algoViewed || []).length %></h1>
                  </div>
                  <div class="col-md-auto">
                    <div class="card-body">
                      <h4 class="card-title" style="padding: 10px; padding-bottom: 3px; text-align: center;">Algorithms Remaining</h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
      </div>

      <div class="card mb-3" style="max-width: 650px; background-color: #4b50b954;box-shadow: 0px 0px 7px #4B50B9A0;">
        <div class="row g-0">
          <div class="col-md-8" style="display: flex;align-items: center;">
            <div class="card-body" style="padding-left: 40px">
              <h2 class="card-title" style="color: #4B50B9; padding-bottom: 5px;">
                <%= user?.role === "student" ? "Quiz Score" : "Create Quiz" %>
              </h2>
              <% if (user?.role === "student") { %>
                <p class="card-text"><small class="text-muted">Preview the scores of the
                  quizzes you have taken.</small></p>

              <button class="btn1" type="submit" data-bs-toggle="modal" data-bs-target="#staticBackdrop">View Score</button>

              <% }else { %>
              <button  style="padding: 5px; height: 50px; width: 150px;" onclick="location.href='/create-quiz'" class="btn2">Create Quiz</button>
              <% } %>

            </div>
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title" id="staticBackdropLabel" style="color: #4B50B9;">Your Score</h3>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                       <p style="font-size: 60px; text-align: center;"><%= user.quizAttempt?.score || 0 %></p> 
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-success" data-bs-dismiss="modal">Understood</button>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
          </div>
          <div class="col-md-4">
            <img src="/images/111.png" class="img-fluid rounded-start">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</main>

</body>

</html>